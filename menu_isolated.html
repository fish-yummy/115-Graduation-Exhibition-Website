<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Css/style.css"> 
    <link rel="stylesheet" href="Css/MainPage1.css">
    <link rel="stylesheet" href="Css/Main.css">
    <link rel="stylesheet" href="Css/Menu.css">
    
    <style>
        /* ğŸš€ æš´åŠ›é–å®šï¼šä¸ç®¡è¦–çª—å¤šå°ï¼Œéƒ½è¦é•·å¾—è·Ÿ Desktop ä¸€æ¨£ */
        html, body {
            margin: 0; padding: 0;
            background: transparent !important; 
            width: 100vw; height: 100vh;
            overflow: hidden;
        }

        #fullscreen-menu-modal {
            background-image: url('image/äº’å‹•é¸å–®/èƒŒæ™¯.png') !important;
            background-size: cover;
            background-position: center;
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
            justify-content: center;
            align-items: center;
        }

        .menu-layout {
            display: flex !important;
            flex-direction: row !important;
            width: 90% !important;
            max-width: 1400px;
            height: 90vh !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 5vw !important;
            /* ğŸ‘ˆ é—œéµï¼šå¾¹åº•æ¶ˆé™¤ Menu.css è£¡çš„ RWD è² é‚Šè·ä½ç§» */
            transform: none !important; 
            margin-top: 0 !important; 
        }

        /* ğŸš€ å¼·åˆ¶æ¼‚æµ®ï¼šè®“æ‰‹æ©Ÿå‹•èµ·ä¾† */
        .phone-wrapper {
            flex: 0 0 auto !important;
            height: 85vh !important;
            aspect-ratio: 9 / 18.5 !important;
            position: relative !important;
            display: flex !important;
            justify-content: center;
            align-items: center;
            /* æ‰‹å‹•æ›è¼‰æ¼‚æµ®å‹•ç•«ï¼Œç¢ºä¿ç„¡è¦– JS å ±éŒ¯ç›´æ¥å‹• */
            animation: float-force 6s ease-in-out infinite !important;
        }

        .phone-frame, .phone-screen-container {
            transform: translateY(0) !important;
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        @keyframes float-force {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* ğŸš€ é—œé–‰æŒ‰éˆ•ï¼šç¢ºä¿åœ¨æœ€é«˜å±¤ï¼Œä¸”é»æ“Šèƒ½ç©¿é€ */
        .modal-close-button {
            z-index: 99999 !important;
            pointer-events: auto !important;
            cursor: pointer !important;
            position: fixed !important;
            top: 30px; right: 30px;
        }
    </style>
</head>
<body>

    <div id="fullscreen-menu-modal">
        <button id="close-menu-btn" class="modal-close-button">
            <img src="image/MainPage1/é—œé–‰æŒ‰éˆ•.svg" alt="é—œé–‰">
        </button>

        <div class="menu-layout">
            <div class="menu-sidebar">
                <img src="./image/MainPage1/title.png" alt="Logo" class="menu-logo">
                <div style="flex: 1;"></div> 
                <button class="category-btn active" data-category="games">äº’å‹•éŠæˆ²é¡</button>
                <button class="category-btn" data-category="narrative">å½±åƒæ•˜äº‹é¡</button>
                <button class="category-btn" data-category="system">ç³»çµ±é–‹ç™¼é¡</button>
                <div style="flex: 1;"></div>
            </div>

            <div class="phone-wrapper">
                <img src="image/äº’å‹•é¸å–®/æ‰‹æ©Ÿ.png" alt="Phone Frame" class="phone-frame">
                <div class="phone-screen-container">
                    <div class="interface-content">
                        <div id="app-list-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
    import { initializeMenu } from './Js/menu.js';

    window.onload = () => {
        // 1. ğŸš€ ã€é—œéµä¿®æ­£ã€‘é¨™é menu.js çš„æª¢æŸ¥
        // å› ç‚ºæ²™ç›’è£¡æ²’æœ‰ open-menu-btnï¼Œæˆ‘å€‘æ‰‹å‹•å»ºç«‹ä¸€å€‹è™›æ“¬å°è±¡ï¼Œé˜²æ­¢ JS åŸ·è¡Œä¸­æ–·
        if (!document.getElementById('open-menu-btn')) {
            const fakeBtn = document.createElement('div');
            fakeBtn.id = 'open-menu-btn';
            fakeBtn.style.display = 'none';
            document.body.appendChild(fakeBtn);
        }

        try {
            // 2. åŸ·è¡ŒåŸæœ¬çš„åˆå§‹åŒ–
            initializeMenu();

            // 3. ğŸš€ ã€æ ¸å¿ƒä¿®æ­£ã€‘å¼·åˆ¶é‡æ–°ç¶å®šé—œé–‰è¨Šè™Ÿ
            // å› ç‚ºåŸæœ¬ JS è£¡çš„ closeBtn ç›£è½å¯èƒ½å› ç‚ºç’°å¢ƒå•é¡Œæ²’éï¼Œæˆ‘å€‘é€™è£¡å†ç¶ä¸€æ¬¡
            const closeBtn = document.getElementById('close-menu-btn');
            if (closeBtn) {
                closeBtn.onclick = (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log("å…§éƒ¨ï¼šæŒ‰ä¸‹å‰å‰ï¼Œç™¼é€ CLOSE_SANDBOX...");
                    // é€™è£¡çš„æš—è™Ÿå¿…é ˆè·Ÿ GroupPage.html è½çš„ä¸€æ¨¡ä¸€æ¨£
                    if (window.parent !== window) {
    window.parent.postMessage('CLOSE_SANDBOX', '*');
} else {
    window.location.href = "group.html"; 
}
                };
            }

            // 4. ä½œå“é€£çµæ•´é è·³è½‰
            document.getElementById('app-list-container').onclick = (e) => {
                const card = e.target.closest('a');
                if (card) {
                    e.preventDefault();
                    window.parent.location.href = card.href;
                }
            };

            // 5. å¼·åˆ¶è®“ CSS å‹•ç•«é¡åˆ¥ç”Ÿæ•ˆ
            document.getElementById('fullscreen-menu-modal').classList.add('active');

        } catch (err) {
            console.error("JS å•Ÿå‹•å¤±æ•—ï¼Œä½†æˆ‘å€‘è£œæ•‘äº†é—œé–‰åŠŸèƒ½:", err);
        }
    };
</script>
</body>
</html>