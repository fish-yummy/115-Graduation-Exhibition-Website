<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>載入中...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .loading-container {
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        /* 動畫區域 */
        .animation-area {
            width: 300px;
            height: 200px;
            background: transparent;
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .loading-animation {
            width: 100%;
            height: 100%;
            background-image: url('loading-frame-1.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            /* 初始狀態不啟動動畫 */
        }

        .loading-animation.animated {
            animation: frameAnimation 2s infinite;
        }

        /* PNG序列動畫 */
        @keyframes frameAnimation {
            0% { background-image: url('loading-frame-1.png'); }
            12.5% { background-image: url('loading-frame-2.png'); }
            25% { background-image: url('loading-frame-3.png'); }
            37.5% { background-image: url('loading-frame-4.png'); }
            50% { background-image: url('loading-frame-5.png'); }
            62.5% { background-image: url('loading-frame-6.png'); }
            75% { background-image: url('loading-frame-7.png'); }
            87.5% { background-image: url('loading-frame-8.png'); }
            100% { background-image: url('loading-frame-1.png'); }
        }

        /* 載入標籤 */
        .loading-label {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        /* 網站相關文字 */
        .website-info {
            margin-bottom: 40px;
        }

        .website-info h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .website-info p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            max-width: 500px;
            margin: 0 auto;
        }

        /* 進度條區域 */
        .progress-area {
            margin-top: 40px;
        }

        .progress-bar {
            width: 100%;
            max-width: 400px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 0 auto 15px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .progress-status {
            font-size: 14px;
            color: #666;
            font-style: italic;
        }

        /* 載入完成後的樣式 */
        .loading-complete {
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s ease;
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .animation-area {
                width: 250px;
                height: 150px;
            }

            .loading-label {
                font-size: 20px;
            }

            .website-info h2 {
                font-size: 24px;
            }

            .website-info p {
                font-size: 14px;
            }

            .progress-text {
                font-size: 16px;
            }
        }

        /* 備用動畫（如果PNG圖片未載入） */
        .fallback-animation {
            width: 60px;
            height: 60px;
            border: 4px solid #e0e0e0;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loading-container" id="loadingContainer">
        <!-- 動畫區域 -->
        <div class="animation-area">
            <div class="loading-animation" id="loadingAnimation">
                <!-- 備用動畫 -->
                <div class="fallback-animation" id="fallbackAnimation" style="display: none;"></div>
            </div>
        </div>



        <!-- 網站相關文字 -->
        <div class="website-info">
            <h2>歡迎來到我們的網站</h2>
            <p id="randomDescription">載入中...</p>
        </div>

        <!-- 進度條區域 -->
        <div class="progress-area">
            <div class="progress-text" id="progressText">載入中... 0%</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-status" id="progressStatus">正在初始化...</div>
        </div>
    </div>

    <script>
        class LoadingPage {
            constructor() {
                this.progress = 0;
                this.progressFill = document.getElementById('progressFill');
                this.progressText = document.getElementById('progressText');
                this.progressStatus = document.getElementById('progressStatus');
                this.loadingContainer = document.getElementById('loadingContainer');
                this.loadingAnimation = document.getElementById('loadingAnimation');
                this.fallbackAnimation = document.getElementById('fallbackAnimation');
                
                // 備用文字列表
                this.randomTexts = [
                    "我們正在為您準備最佳的瀏覽體驗，請稍候片刻。",
                    "正在載入精彩內容，感謝您的耐心等待。",
                    "系統正在優化中，即將為您呈現完美體驗。",
                    "載入中...好東西值得等待！",
                    "正在連接到最新資訊，請稍等一下。",
                    "我們正在準備驚喜內容給您。",
                    "載入進行中，馬上就好了！",
                    "正在為您客製化最佳體驗。",
                    "系統正在處理您的請求，請稍候。",
                    "即將完成載入，感謝您的等待。"
                ];
                
                this.loadingSteps = [
                    { progress: 10, status: '正在載入資源...' },
                    { progress: 25, status: '正在連接伺服器...' },
                    { progress: 40, status: '正在載入內容...' },
                    { progress: 60, status: '正在處理數據...' },
                    { progress: 80, status: '正在優化體驗...' },
                    { progress: 95, status: '即將完成...' },
                    { progress: 100, status: '載入完成！' }
                ];
                
                this.currentStep = 0;
                this.loadingInterval = null;
                this.imagesLoaded = false;
                
                this.init();
            }
            
            init() {
                // 設置隨機文字
                this.setRandomText();
                
                // 預載入PNG圖片
                this.preloadImages();
            }
            
            setRandomText() {
                // 從備用文字列表中隨機選擇一句
                const randomIndex = Math.floor(Math.random() * this.randomTexts.length);
                const selectedText = this.randomTexts[randomIndex];
                
                // 更新HTML中的文字
                const descriptionElement = document.getElementById('randomDescription');
                if (descriptionElement) {
                    descriptionElement.textContent = selectedText;
                }
                
                console.log(`隨機選擇的文字: ${selectedText}`);
            }
            
            preloadImages() {
                const imageUrls = [
                    'loading-frame-1.png',
                    'loading-frame-2.png',
                    'loading-frame-3.png',
                    'loading-frame-4.png',
                    'loading-frame-5.png',
                    'loading-frame-6.png',
                    'loading-frame-7.png',
                    'loading-frame-8.png'
                ];
                
                let loadedCount = 0;
                const totalImages = imageUrls.length;
                
                imageUrls.forEach((url, index) => {
                    const img = new Image();
                    
                    img.onload = () => {
                        loadedCount++;
                        console.log(`圖片 ${index + 1} 載入完成 (${loadedCount}/${totalImages})`);
                        
                        if (loadedCount === totalImages) {
                            this.onAllImagesLoaded();
                        }
                    };
                    
                    img.onerror = () => {
                        console.error(`圖片 ${url} 載入失敗`);
                        loadedCount++;
                        
                        if (loadedCount === totalImages) {
                            this.onImageLoadError();
                        }
                    };
                    
                    img.src = url;
                });
            }
            
            onAllImagesLoaded() {
                console.log('所有PNG圖片載入完成，開始動畫');
                this.imagesLoaded = true;
                
                // 啟動PNG動畫
                this.loadingAnimation.classList.add('animated');
                
                // 開始載入進度
                this.startLoading();
            }
            
            onImageLoadError() {
                console.log('部分圖片載入失敗，使用備用動畫');
                this.loadingAnimation.style.display = 'none';
                this.fallbackAnimation.style.display = 'block';
                
                // 開始載入進度
                this.startLoading();
            }
            
            startLoading() {
                this.loadingInterval = setInterval(() => {
                    if (this.currentStep < this.loadingSteps.length) {
                        const step = this.loadingSteps[this.currentStep];
                        this.updateProgress(step.progress, step.status);
                        this.currentStep++;
                    } else {
                        this.completeLoading();
                    }
                }, 1200); // 每1200毫秒更新一次，讓進度更穩定
            }
            
            updateProgress(targetProgress, status) {
                // 使用更平滑的進度更新，避免跳動
                const currentProgress = this.progress;
                const progressDiff = targetProgress - currentProgress;
                const animationDuration = 800; // 800毫秒完成進度更新
                const steps = 40; // 增加步數讓動畫更平滑
                const stepSize = progressDiff / steps;
                const stepInterval = animationDuration / steps;
                
                let stepCount = 0;
                const progressInterval = setInterval(() => {
                    if (stepCount < steps) {
                        this.progress += stepSize;
                        this.progressFill.style.width = `${this.progress}%`;
                        this.progressText.textContent = `載入中... ${Math.round(this.progress)}%`;
                        stepCount++;
                    } else {
                        clearInterval(progressInterval);
                        this.progress = targetProgress;
                        this.progressFill.style.width = `${this.progress}%`;
                        this.progressText.textContent = `載入中... ${this.progress}%`;
                        this.progressStatus.textContent = status;
                    }
                }, stepInterval);
            }
            
            completeLoading() {
                clearInterval(this.loadingInterval);
                
                // 延遲一下讓用戶看到100%
                setTimeout(() => {
                    this.progressText.textContent = '載入完成！';
                    this.progressStatus.textContent = '正在跳轉...';
                    
                    // 載入完成動畫
                    setTimeout(() => {
                        this.loadingContainer.classList.add('loading-complete');
                        
                        // 這裡可以添加跳轉到主頁面的邏輯
                        setTimeout(() => {
                            alert('載入完成！這裡可以跳轉到主頁面。');
                        }, 500);
                    }, 1000);
                }, 500);
            }
        }
        
        // 頁面載入完成後初始化
        document.addEventListener('DOMContentLoaded', () => {
            new LoadingPage();
        });
    </script>
</body>
</html>

